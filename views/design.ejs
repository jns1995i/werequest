<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REGISTRAR</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/color.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <link rel="stylesheet" href="/user.css">
    <link rel="icon" href="/images/clogo.png">
    <style>
        .horizon {
        display: flex;
        overflow-x: auto;
        white-space: nowrap;
        gap: 20px;
        padding: 15px 0;
        justify-content: start;
        scroll-snap-type: x mandatory;
        border: 1px solid rgba(255, 255, 255, 0);
        border-radius: 10px;
        }
        .horCard {
            flex: 0 0 auto;
            padding: 20px;
            width: 23%;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transition: max-height 0.6s ease-in-out, opacity 0.8s ease-in-out, padding 0.4s ease-in-out;
            white-space: pre-line;
        }

        .details.show {
            max-height: fit-content;
            opacity: 1;
            padding: 10px 0;
        }

        .newsCard {
            transition: all 0.8s ease-in-out;
        }
        #assignDepCard {
            max-width: 0;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.9s ease, opacity 0.6s ease;
        }
        #assignDepCard.active {
            margin-bottom: 150px;
            max-width: 100%;
            max-height: 100%;
            opacity: 1;
            padding: 0;
        }
        .unseen {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.9s ease, opacity 0.6s ease;
        }
        .seen {
            max-height: 300px;
            opacity: 1;
            padding: 0;
            transition: max-height 0.9s ease, opacity 0.6s ease;
        }
        textarea {
            background-color: white;
        }
    </style>
<body class="block">
    <%- body %>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
        document.querySelectorAll(".showBtn").forEach(button => {
            button.addEventListener("click", function(event) {
                event.preventDefault(); // Prevent default <a> behavior
    
                let newsCard = this.closest(".newsCard"); // Get parent newsCard
                let details = newsCard.querySelector(".details"); // Get details inside the card
                let icon = this.querySelector("i"); // Get icon inside the button
    
                details.classList.toggle("show"); // Toggle visibility
                
                // Toggle icon class
                if (details.classList.contains("show")) {
                    icon.classList.remove("fa-chevron-down");
                    icon.classList.add("fa-chevron-up");
                } else {
                    icon.classList.remove("fa-chevron-up");
                    icon.classList.add("fa-chevron-down");
                }
            });
        });
    });
    
    </script>
    <script>
        document.getElementById("univ").addEventListener("input", function () {
    let filter = this.value.toLowerCase();
    let newsCards = document.querySelectorAll(".newsCard");
    let found = false;

    // If the search field is empty, show all cards and hide "NOT FOUND"
    if (filter === "") {
        newsCards.forEach(card => card.style.display = "block");
        document.getElementById("notFound").style.display = "none";
        return;
    }

    // Hide cards that don't match the filter and show matching ones
    newsCards.forEach(card => {
        if (card.textContent.toLowerCase().includes(filter)) {
            card.style.display = "flex";
            found = true;
        } else {
            card.style.display = "none";
        }
    });

    // Show "NOT FOUND" if no matches are found
    document.getElementById("notFound").style.display = found ? "none" : "flex";
});

    </script>
<script>
    document.querySelectorAll('.details').forEach(div => {
    div.innerHTML = div.innerHTML.replace(/(?<!\S)(https?:\/\/[^\s]+|www\.[^\s]+|\b[a-zA-Z0-9.-]+\.(com|net|org|gov|edu|ph)\b)(?!\S)/g, '<a href="http://$1" target="_blank" class="inline blue str500">$1</a>');
});
</script>
<script>
    document.querySelectorAll('.details').forEach(div => {
    div.innerHTML = div.innerHTML.replace(/(^|\s)(#\w+)/g, '$1<span class="green str500">$2</span>');
});
</script>

<script>
    document.getElementById("assignBtn").addEventListener("click", function(event) {
        event.preventDefault(); // Prevent default link behavior
        
        let assignCard = document.getElementById("assignDepCard");
        let assignBtn = document.getElementById("assignBtn");

        // Toggle 'active' class
        assignCard.classList.toggle("active");

        // Change button text & icon based on active state
        if (assignCard.classList.contains("active")) {
            assignBtn.innerHTML = '<i class="fas fa-times"></i> Close Form';
        } else {
            assignBtn.innerHTML = '<i class="fas fa-plus"></i>Request Document';
        }
    });
</script>
    
</body>
</html>